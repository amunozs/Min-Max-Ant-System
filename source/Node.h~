#ifndef NODE_H_
#define NODE_H_

#include <iostream>
#include <fstream>


class Node 
{
	private:

	bool repeatable_;
	bool required_;
	std::string name_;	

	public:

	Node () : repeteable_(0), required(0), name_ ("NoName") {}
	Node (bool required, bool repeteable, std::string name ("NoName")) : repeatable_(repeteable), required_(required), name_(name) {}

	bool isRepeteable	() 	{ return repeteable_; }
	bool isRequired		() 	{ return required_; }
	std::string getName	() 	{ return name_; }

	void setRepeteable	(bool repeteable)	{ repeteable_ = repeteable; }
	void setRequired	(bool required)		{ required_ = required; }
	void setName 		(std::string name)	{ name_ = name; }

	friend ostream &operator<< (ostream &output, const Node &N)
	{
		output << N.name_ << ", " << N.required_ << ", " << N.repeteable_;
		return output;
	}

	friend istream &operator>> ( istream  &input, Node &N )
    { 
        input >> N.name_ >> N.required_ >> N.repeteable_;
        return input;            
    }
};


//TODO Creo que se puede hacer sin templates
template <size_t num_nodes> class ProblemDefinition
{
	private:
	
	Node *node_;
	double **feromone_;
	double **distance_;

	public:
	
	ProblemDefinition () 
	{

		node_ = new Node[num_nodes];

		feromone_ = new double*[num_nodes];
		distance_ = new double*[num_nodes];

		for (int i = 0; i < num_nodes; ++i)
		{
    		feromone_[i] = new double[num_nodes];
			feromone_[i] = new double[num_nodes];
		}
	}

	~ProblemDefinition ()
	{
		delete[] node_;

		for (int i = 0; i < num_nodes; ++i)
		{
    		delete [] feromone_[i];
			delete [] distance_[i];
		}

  		delete [] feromone_;
		delete [] distance_;
	}

	bool readFromFile (const char * filename)
	{
		std::ifstream file;
		file.open (filename);

		if (file.is_open())
        {
			for (int i = 0; i < num_nodes; ++i)
			{
				file >> node_[i];

				distance[i][0] = -1;

				for (int c = 1; c < num_nodes; ++c)
					file >> distance[i][c];
			}
			file.close();
			return 1;
		}
		return 0;
	}

	friend ostream &operator<< (ostream &output, const ProblemDefinition &P)
	{
		output << "NODES:" << std::endl << std::endl;
		for (int i = 0; i < num_nodes; ++i)
		{
			output << node_[i] << std::endl;
		}

		output << std::endl << "DISTANCES:" << std::endl << std::endl;
 		for (int i = 0; i < num_nodes; ++i)
		{
			for (int c = 0; c < num_nodes; ++c)
				output << i << "," << c << ": " << distance_[i][c] << std::endl;
		}
		return output;
	}

};












#endif
